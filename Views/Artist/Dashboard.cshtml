@inject Microsoft.AspNetCore.Identity.UserManager<User> UserManager
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject Spotify_clone2.Repositories.IClientRepository clientRepository
@inject Spotify_clone2.Repositories.IArtistRepository artistRepository
@inject Spotify_clone2.Repositories.ISongRepository songRepository

@model Spotify_clone2.Models.Artiste


@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Dashbord.cshtml";

    string currentUserId = UserManager.GetUserId(HttpContextAccessor.HttpContext.User);
    var currentUser = await UserManager.FindByIdAsync(currentUserId);
    var currentClient = await clientRepository.GetByUserIdAsync(currentUserId);
    var currentArtist = artistRepository.getByUserID(currentUserId);
}

<section class="content" style="height : 91vh ;">

    <div class="content__left">

        <section class="navigation">

            <!-- Your Music -->
            <div class="navigation__list">

                <div class="navigation__list__header" role="button" data-toggle="collapse" href="#yourMusic"
                     aria-expanded="true" aria-controls="yourMusic">
                    Your Music
                </div>

                <div class="collapse in" id="yourMusic">

                    <a href="@Url.Action("Index","Songs")" class="navigation__list__item">
                        <i class="ion-headphone"></i>
                        <span>Songs</span>
                    </a>

                    <a href="@Url.Action("Index","Albums")" class="navigation__list__item">
                        <i class="ion-ios-musical-notes"></i>
                        <span>Albums</span>
                    </a>

                    <a href="#" class="navigation__list__item">
                        <i class="ion-person"></i>
                        <span>Artists</span>
                    </a>

                </div>

            </div>
            <!-- / -->
            <!-- Playlists -->
            <div class="navigation__list">

                <div class="navigation__list__header" role="button" data-toggle="collapse" href="#playlists"
                     aria-expanded="true" aria-controls="playlists">
                    Albums
                </div>

                <div class="collapse in" id="playlists">
                    @foreach (var album in Model.Albums)
                    {
                        <a href="@Url.Action("Details","Albums" ,new { id = @album.AlbumID })" class="navigation__list__item">
                            <i class="ion-ios-musical-notes"></i>
                            <span>@album.name</span>
                        </a>
                    }
                </div>

            </div>
            <!-- / -->

        </section>

        <section class="playlist">

            <a href="@Url.Action("Create","Albums" )">

                <i class="ion-ios-plus-outline"></i>

                New Album

            </a>

        </section>
        @foreach (var album in Model.Albums)
        {

            <section class="playing">

                <div class="playing__art">

                    <img src="~/img/album/@album.albumCover" alt="Album Art" />

                </div>

                <div class="playing__song">

                    <a class="playing__song__name">@album.name</a>

                    <a class="playing__song__artist">@currentUser.Nom</a>

                </div>

                <div class="playing__add">

                    <i class="ion-checkmark"></i>

                </div>

            </section>
        }

    </div>

    <div class="content__middle">
        <div class="artist is-verified">
            <div class="artist__header">
                <div class="artist__info">
                    <div class="profile__img">
                        <img src="~/img/@currentUser.avatar" alt="G-Eazy" />
                    </div>
                    <div class="artist__info__meta">
                        <div class="artist__info__type">Artist</div>
                        <div class="artist__info__name"> @currentUser.Nom @currentUser.Prenom</div>
                        <div class="artist__info__actions">
                            <button class="button-dark">
                                <div style="color:#fff;">@Html.ActionLink("Profile", "profile", "Account", null)</div>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="artist__listeners">
                    <div class="artist__listeners__count">15,662,810</div>
                    <div class="artist__listeners__label">Monthly Listeners</div>
                </div>

                <div class="artist__navigation">
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active">
                            <a href="#artist-overview" aria-controls="artist-overview" role="tab" data-toggle="tab">Overview</a>
                        </li>
                        <li role="presentation">
                            <a href="#related-artists" aria-controls="related-artists" role="tab" data-toggle="tab">
                                All
                                Albums
                            </a>
                        </li>
                        <!--<li role="presentation">
                          <a href="#artist-about" aria-controls="artist-about" role="tab" data-toggle="tab">About</a>
                        </li>-->
                    </ul>

                    <div class="artist__navigation__friends">

                        <a href="#">
                            <img src="https://images.unsplash.com/photo-1465488867967-ffb57e7f0a89?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80" alt="" />
                        </a>

                        <a href="#">
                            <img src="https://images.unsplash.com/photo-1505060605162-2fe0e781bd21?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80" alt="" />
                        </a>

                        <a href="#">
                            <img src="https://images.unsplash.com/photo-1456162018889-1d2b969f7084?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1173&q=80" alt="" />
                        </a>

                    </div>

                </div>

            </div>

            <div class="artist__content">

                <div class="tab-content">

                    <!-- Overview -->
                    <div role="tabpanel" class="tab-pane active" id="artist-overview">

                        <div class="overview">

                            <div class="overview__artist">

                                <!-- Latest Release-->
                                <div class="section-title">Latest Songs</div>

                                <div class="latest-release">

                                    <div class="latest-release__art">

                                        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/7022/whenDarkOut.jpg"
                                             alt="When It's Dark Out" />

                                    </div>

                                    <div class="latest-release__song">

                                        <div class="latest-release__song__title">Drifting (Track Commentary)</div>

                                        <div class="latest-release__song__date">

                                            <span class="day">4</span>

                                            <span class="month">December</span>

                                            <span class="year">2022</span>

                                        </div>

                                    </div>

                                </div>
                                <!-- / -->
                                <!-- Popular-->
                                <!-- / -->

                            </div>

                            <div class="overview__related">

                                <div class="section-title">Your Albums</div>

                                <div class="related-artists">

                                    @foreach (var album in Model.Albums)
                                    {

                                        <a href="@Url.Action("Details","Albums" ,new { id = @album.AlbumID })" class="related-artist">

                                            <span class="related-artist__img">

                                                <img src="~/img/album/@album.albumCover" alt="Hoodie Allen" />

                                            </span>

                                            <span class="related-artist__name">@album.name</span>

                                        </a>
                                    }

                                </div>

                            </div>

                            <div class="overview__albums">

                                <div class="overview__albums__head">

                                    <span class="section-title">Albums</span>

                                    <span class="view-type">

                                        <i class="fa fa-list list active"></i>

                                        <i class="fa fa-th-large card"></i>

                                    </span>

                                </div>
                                @foreach (var album in Model.Albums)
                                {
                                    var Songs = await songRepository.GetByAlbumIdAsync(album.AlbumID);

                                    <div class="album">

                                        <div class="album__info">

                                            <div class="album__info__art">

                                                <img src="~/img/album/@album.albumCover"
                                                     alt="When It's Dark Out" />

                                            </div>

                                            <div class="album__info__meta">

                                                <div class="album__year">2021</div>

                                                <div class="album__name">@album.name</div>

                                                <div class="album__actions">

                                                    <button class="button-light more">
                                                        <i class="ion-ios-more"></i>
                                                    </button>

                                                </div>

                                            </div>

                                        </div>

                                        <div class="album__tracks">

                                            <div class="tracks">

                                                <div class="tracks__heading">

                                                    <div class="tracks__heading__number">#</div>

                                                    <div class="tracks__heading__title">Song</div>

                                                    <div class="tracks__heading__length">

                                                        <i class="ion-ios-stopwatch-outline"></i>

                                                    </div>

                                                    <div class="tracks__heading__popularity">

                                                        <i class="ion-thumbsup"></i>

                                                    </div>

                                                </div>

                                                @foreach (var song in Songs)
                                                {
                                                <div class="track">

                                                    <div class="track__number">@song.SongId</div>

                                                    <div class="track__added">

                                                        <i class="ion-checkmark-round added"> </i>

                                                    </div>

                                                    <div class="track__title">@song.nomSong</div>

                                                    <div class="track__explicit">

                                                        <span class="label">Explicit</span>

                                                    </div>

                                                    <div class="track__length">5:11</div>

                                                    <div class="track__popularity">

                                                        <i class="ion-arrow-graph-up-right"></i>

                                                    </div>

                                                </div>
                                                }
                                                


                                            </div>

                                        </div>

                                    </div>
                                }

                                </div>

                        </div>

                    </div>
                    <!-- / -->
                    <!-- Related Artists -->
                    <div role="tabpanel" class="tab-pane" id="related-artists">
                        <div class="media-cards">
                            @foreach (var album in Model.Albums)
                            {
                                <div class="media-card">
                                    <div class="media-card__image"
                                         style="background-image: url('@Url.Content("~/img/album/"+@album.albumCover)')">
                                        <i class="ion-ios-play"></i>

                                    </div>
                                    <a href="@Url.Action("Details","Albums" ,new { id = @album.AlbumID })" class="media-card__footer">@album.name</a>
                                </div>
                            }
                        </div>
                    </div>
                    <!-- / -->
                    <!-- About // Coming Soon-->
                    <!--<div role="tabpanel" class="tab-pane" id="artist-about">About</div>-->
                    <!-- / -->

                </div>

            </div>

        </div>

    </div>

    <div class="content__right">



    </div>

</section>

<section class="current-track">
</section>
